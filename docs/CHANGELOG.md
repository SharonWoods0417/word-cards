# 更新日志

## [v1.5] - 2025-08-10

### ✨ 变更与新增
- 取消“一键下载 PDF（pdf-lib 重绘）”，统一采用浏览器打印（打印对话框可选择“保存为 PDF”）
- 浏览器打印增强：
  - 反面打印每行列顺序反转（第一列与第二列互换），配合“短边翻转”实现正反对应
  - 新增“背面 X/Y 偏移（mm）”设置，持久化到 localStorage，便于不同打印机微调
- 图片重新生成：Pexels 搜索结果使用随机页+随机挑选，弹窗内增加去重重试，显著降低重复
- 文档与环境变量统一：全面使用 `NEXT_PUBLIC_OPENROUTER_API_KEY` 与 `NEXT_PUBLIC_PEXELS_API_KEY`

### 🔥 功能下线（v1.6 预发布）
- 自然拼读（phonics）功能完整下线：
  - 删除 `lib/phonics.ts` 与 `/phonics-test` 测试页
  - `types/word.ts` 移除 `phonics` 字段
  - CSV 模板与解析、审核弹窗、卡片正面 UI、API 生成流程均移除 `phonics`
  - 文档字段表将 `phonics` 标注为“已下线”

### 📝 文档
- 更新 `docs/README.md` 与根目录 `README.md`：移除“PDF 导出”主流程说明，增加浏览器打印与偏移指引
- 更新 `docs/API_SETUP.md`：统一环境变量命名
- 更新 `docs/EXPORT_GUIDE.md`：改为“浏览器打印与保存为 PDF”的指引

## [v1.4] - 2024-12-19

### ✨ 新增功能
- **统一卡片尺寸配置**：实现"一次配置，处处生效"的卡片尺寸管理
- **等比缩放效果**：网页预览和打印预览保持完全一致的视觉效果
- **配置中心**：新增 `config/cardConfig.ts` 统一管理所有布局参数
- 替换为“浏览器打印/保存为 PDF”的导出流程说明

### 🔧 技术改进
- **统一配置系统**：所有场景（网页预览、打印预览、保存为 PDF）使用相同的配置源
- **物理尺寸单位**：统一使用毫米(mm)单位，确保打印精度
- **布局参数集中化**：A4尺寸、卡片尺寸、间距、边距等参数统一管理

### 📐 布局优化
- **卡片尺寸**：统一为75mm × 90mm (5:6比例)
- **网格布局**：2列3行，每页6张卡片
- **间距控制**：左右间距10mm，上下间距6mm
- **边距设置**：上边距6mm，下边距9mm，侧边距10mm

### 📝 文档更新
- 更新README.md，添加统一配置功能说明
- 更新API_SETUP.md，添加配置管理章节
- 更新项目结构说明，包含新的config目录

---

## [v1.3] - 2024-12-19

### 🗑️ 移除功能
- **移除JPG导出功能**：由于技术兼容性问题（html2canvas与Tailwind CSS v4的oklch颜色格式冲突），已完全移除JPG导出功能
- **移除相关依赖**：移除了html2canvas库的导入和使用
- **简化UI**：移除了"导出为JPG"按钮，简化了导出选项界面

### ✅ 保留功能
- **PDF导出功能**：完全保留并优化，支持多种纸张尺寸和布局
- **所有其他功能**：CSV上传、数据编辑、预览等功能完全正常

### 🔧 技术改进
- **字体编码优化**：修复了PDF导出中的音标字符编码问题
- **错误处理增强**：改进了PDF导出的错误处理机制
- **代码清理**：移除了所有JPG导出相关的代码，保持代码整洁

### 📝 文档更新
- 更新了README.md中的任务清单
- 更新了技术栈说明
- 更新了MVP成功标准
- 更新了项目状态和版本信息

---

## [v1.2] - 2024-12-19

### ✨ 新增功能
- **PDF导出功能**：使用pdf-lib库实现高质量PDF导出
- **多种纸张尺寸**：支持A4、Letter、A3纸张
- **多种布局选项**：支持4/6/8/9张卡片每页
- **双面对齐**：支持正反面对齐打印
- **导出设置**：可调节卡片间距、页面边距等参数

### 🔧 技术实现
- **物理尺寸单位**：使用mm/pt单位确保打印精度
- **字体编码处理**：支持音标和中文字符
- **安全文本绘制**：处理不支持的字符，确保导出成功

### 🐛 问题修复
- **字体编码错误**：修复了"WinAnsi cannot encode"错误
- **开发服务器错误**：修复了模块加载和缓存问题

---

## [v1.1] - 2024-08-06

### ✨ 新增功能
- **CSV文件上传**：支持拖拽和点击上传
- **手动添加单词**：支持逐个添加单词条目
- **数据编辑表格**：支持编辑所有单词字段
- **卡片预览**：支持正反面预览切换
- **数据持久化**：使用localStorage保存数据

### 🎨 UI改进
- **现代化界面**：使用Tailwind CSS和shadcn/ui组件
- **响应式设计**：适配不同屏幕尺寸
- **用户友好**：清晰的提示信息和状态反馈

---

## [v1.0] - 2024-08-06

### 🎯 项目初始化
- **项目架构**：基于Next.js 15.2.4和React 19
- **技术栈**：TypeScript、Tailwind CSS、shadcn/ui
- **基础功能**：单词卡片制作工具的基础框架 